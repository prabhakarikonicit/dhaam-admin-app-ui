import React, { useState } from "react";
import CustomModal, { FieldDefinition } from "../../../common/modals";
import {
  CustomCards,
  CardItem,
  DynamicField,
} from "../../../common/customcards";

const Email: React.FC = () => {

    const [dynamicFieldsValues, setDynamicFieldsValues] = useState({
      selectedSMS: "",
      messageType: "transactional",
      environment: "production"
    });
  // State for POS items
  const [CardItems, setCardItems] = useState<CardItem[]>([
    {
      id: "1",
      name: "Mailchimp",
      isConnected: false,
      isActive: false,
      logoType: "Mailchimp",
    },
    {
      id: "2",
      name: "Klaviyo",
      isConnected: true,
      isActive: true,
      logoType: "Klaviyo",
    },

  ]);
 const dynamicFields: DynamicField[] = [
    {
      id: "selectedSMS",
      type: "select",
      label: " ",
      placeholder: "Select Email Marketing",
      options: [
        { value: "mailchimp", label: "Mailchimp" },
        { value: "klaviyo", label: "Klaviyo" },

      ],
      required: true
    }
  ];
  // State for modal
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [currentItem, setCurrentItem] = useState<CardItem | null>(null);
  const [modalMode, setModalMode] = useState<
    "add" | "edit" | "view" | "delete" | "confirm"
  >("view");

  // Field definitions for the modal
  const emailFields: FieldDefinition[] = [
    {
      id: "12131",
      label: "Account id",
      type: "text",
      required: true,
    },
    {
      id: "token",
      label: "Token",
      type: "password",
      required: true,
    },
  ];
  const handleDynamicFieldChange = (fieldId: string, value: any) => {
    setDynamicFieldsValues((prev) => ({
      ...prev,
      [fieldId]: value,
    }));
  };

  // Toggle connection state for a POS
  const handleToggleConnection = (id: string) => {
    setCardItems((items) =>
      items.map((item) =>
        item.id === id ? { ...item, isConnected: !item.isConnected } : item
      )
    );
  };

  // Open edit modal for a POS
  const handleEditClick = (item: CardItem) => {
    setCurrentItem(item);
    setModalMode("edit");
    setIsModalOpen(true);
  };

  // Handle save from modal
  const handleSave = (item: CardItem) => {
    if (modalMode === "edit") {
      setCardItems((items) =>
        items.map((posItem) => (posItem.id === item.id ? item : posItem))
      );
    } else if (modalMode === "add") {
      setCardItems((items) => [...items, item]);
    }
  };

  // Logo component for each POS provider
  const renderLogo = (logoType: string) => {
    if (logoType === "Mailchimp") {
      return (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="48"
          height="17"
          viewBox="0 0 48 17"
          fill="none"
        >
          <path
            d="M5.41353 11.6334C6.18016 11.6334 6.8016 11.0235 6.8016 10.2712C6.8016 9.51884 6.18016 8.909 5.41353 8.909C4.6469 8.909 4.02543 9.51884 4.02543 10.2712C4.02543 11.0235 4.6469 11.6334 5.41353 11.6334ZM5.41353 8.09169C6.18016 8.09169 6.8016 7.48181 6.8016 6.72949C6.8016 5.97717 6.18016 5.3673 5.41353 5.3673C4.6469 5.3673 4.02543 5.97717 4.02543 6.72949C4.02543 7.48181 4.6469 8.09169 5.41353 8.09169ZM9.02256 11.6334C9.78918 11.6334 10.4107 11.0235 10.4107 10.2712C10.4107 9.51884 9.78918 8.909 9.02256 8.909C8.25593 8.909 7.63445 9.51884 7.63445 10.2712C7.63445 11.0235 8.25593 11.6334 9.02256 11.6334ZM9.02256 8.09169C9.78918 8.09169 10.4107 7.48181 10.4107 6.72949C10.4107 5.97717 9.78918 5.3673 9.02256 5.3673C8.25593 5.3673 7.63445 5.97717 7.63445 6.72949C7.63445 7.48181 8.25593 8.09169 9.02256 8.09169ZM7.21805 1.41699C11.1278 1.41699 14.4361 4.66353 14.4361 8.50033C14.4361 12.3371 11.1278 15.5837 7.21805 15.5837C3.30828 15.5837 0 12.3371 0 8.50033C0 4.66357 3.30829 1.41699 7.21805 1.41699ZM7.21805 3.32404C4.31321 3.32404 1.94332 5.56917 1.94332 8.40523C1.94332 11.2413 4.31321 13.6766 7.21805 13.6766C10.1229 13.6766 12.4928 11.2413 12.4928 8.40523C12.4928 5.56917 10.1229 3.32404 7.21805 3.32404ZM22.6231 12.7231H24.8912C24.9728 12.7231 25.0078 12.6888 25.0311 12.6087L25.7822 9.88745L26.5109 12.6087C26.5342 12.6888 26.5692 12.7231 26.6508 12.7231H28.9179C29.0112 12.7231 29.0695 12.6888 29.0928 12.6087L30.6771 6.83847V12.5858C30.6771 12.6659 30.7354 12.7231 30.817 12.7231H33.3122C33.3938 12.7231 33.4521 12.6659 33.4521 12.5858V6.59438C33.4521 6.51427 33.3938 6.45707 33.3122 6.45707L28.4502 6.45753C28.3686 6.45753 28.3219 6.49188 28.2986 6.5834L27.7479 9.35302L27.1933 6.5834C27.1817 6.50332 27.1234 6.45753 27.0418 6.45753H24.5739C24.4922 6.45753 24.4339 6.50332 24.4223 6.5834L23.8823 9.35302L23.344 6.5834C23.3207 6.49188 23.274 6.45753 23.1924 6.45753L19.5081 6.45707V4.416C19.5081 4.31301 19.4359 4.26725 19.3193 4.30157L17.0029 5.03481C16.9213 5.05768 16.8747 5.12636 16.8747 5.20643L16.872 6.16832C16.872 6.40862 16.7437 6.51157 16.4988 6.51157H15.9C15.8184 6.51157 15.7601 6.56877 15.7601 6.64888V8.36358C15.7601 8.44369 15.8184 8.50089 15.9 8.50089H16.7959V10.5834C16.7959 12.0594 17.3877 12.8936 19.195 12.8936C19.8946 12.8936 20.4665 12.8054 20.7697 12.6681C20.8629 12.6223 20.8962 12.5651 20.8962 12.4736V10.8525C20.8962 10.7609 20.8046 10.7151 20.688 10.7723C20.5365 10.841 20.361 10.8525 20.1861 10.8525C19.7197 10.8525 19.5709 10.6808 19.5709 10.1087V8.50089H20.6573C20.739 8.50089 20.7933 8.44784 20.7933 8.36776V6.83847L22.4482 12.6087C22.4715 12.6888 22.5298 12.7231 22.6231 12.7231ZM30.6771 5.77512C30.6771 5.85523 30.7354 5.91247 30.817 5.91247H33.3122C33.3938 5.91247 33.4521 5.85523 33.4521 5.77512V4.416C33.4521 4.33589 33.3938 4.27869 33.3122 4.27869H30.817C30.7354 4.27869 30.6771 4.33589 30.6771 4.416V5.77512ZM34.0078 12.5858C34.0078 12.6659 34.0661 12.7231 34.1477 12.7231H36.6457C36.7272 12.7231 36.7853 12.6659 36.7853 12.5858V4.416C36.7853 4.33589 36.7272 4.27869 36.6457 4.27869H34.1477C34.0661 4.27869 34.0078 4.33589 34.0078 4.416V12.5858ZM37.3408 12.5858C37.3408 12.6659 37.3992 12.7231 37.4808 12.7231H39.9717C40.0537 12.7231 40.1118 12.6659 40.1118 12.5858L40.1103 6.59438C40.1103 6.51427 40.0522 6.45707 39.9706 6.45707H37.4793C37.3978 6.45707 37.3397 6.51427 37.3397 6.59438L37.3408 12.5858ZM37.3397 5.77512C37.3397 5.85523 37.3978 5.91247 37.4793 5.91247H39.9717C40.0537 5.91247 40.1118 5.85523 40.1118 5.77512L40.1103 4.416C40.1103 4.33589 40.0522 4.27869 39.9706 4.27869H37.4793C37.3978 4.27869 37.3397 4.33589 37.3397 4.416V5.77512ZM40.5481 9.6451C40.5481 11.5102 42.0072 12.9138 44.1412 12.9138C46.2749 12.9138 47.7214 11.5102 47.7214 9.6451V9.49635C47.7214 7.63127 46.2749 6.26635 44.1412 6.26635C42.0072 6.26635 40.5481 7.63127 40.5481 9.49635V9.6451ZM43.2249 9.65002V9.53828C43.2249 8.68014 43.628 8.34449 44.1412 8.34449C44.6541 8.34449 45.0594 8.68014 45.0594 9.53828V9.65002C45.0594 10.4968 44.6541 10.8509 44.1412 10.8509C43.628 10.8509 43.2249 10.4968 43.2249 9.65002Z"
            fill="#F22F46"
          />
        </svg>
      );
    }  else {
      return (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="48"
          height="20"
          viewBox="0 0 48 20"
          fill="none"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M8.01269 14.8556C4.22372 17.1966 3.06205 15.3195 3.06205 15.3195C2.11752 14.025 1.97639 11.123 2.01981 9.39695C2.03067 8.78204 2.11752 8.00532 2.11752 8.00532L2.91006 7.09913C2.91006 7.09913 3.86545 6.6784 5.21167 7.20701L5.2551 7.2178L5.29853 7.22859C4.98368 7.17465 4.74484 7.29331 4.61456 7.74641C4.11515 9.64508 4.0283 12.6765 5.80879 13.9387C6.35162 14.327 6.97045 14.6291 7.62185 14.7693C7.63271 14.7801 7.73042 14.8125 8.01269 14.8556Z"
            fill="#009BDE"
          />
          <path
            d="M14.8849 10.0011H13.8752V7.92983C13.8752 6.99128 14.3529 6.68922 15.3083 6.68922C15.558 6.68922 15.7643 6.67843 16.0683 6.70001L15.9163 7.5091C15.8403 7.49831 15.6015 7.49831 15.406 7.49831C14.9392 7.49831 14.8849 7.66013 14.8849 8.03771V10.0011Z"
            fill="#3E4543"
          />
          <path
            d="M19.3468 8.17757V8.52278C19.3468 9.70945 18.9017 10.0978 17.7183 10.0978C16.535 10.0978 16.0898 9.70945 16.0898 8.52278V8.17757C16.0898 6.96933 16.535 6.60254 17.7183 6.60254C18.9017 6.60254 19.3468 6.96933 19.3468 8.17757ZM18.3263 8.14521C18.3263 7.49793 18.2069 7.39006 17.7183 7.39006C17.2407 7.39006 17.0995 7.49793 17.0995 8.14521V8.54436C17.0995 9.20242 17.2298 9.3103 17.7183 9.3103C18.2069 9.3103 18.3263 9.20242 18.3263 8.54436V8.14521Z"
            fill="#3E4543"
          />
          <path
            d="M19.7378 8.85773V6.71094H20.7475V8.81458C20.7475 9.17058 20.8126 9.32161 21.3012 9.32161C21.7788 9.32161 21.844 9.17058 21.844 8.81458V6.71094H22.8537V8.85773C22.8537 9.79628 22.3868 10.0983 21.3012 10.0983C20.1938 10.0983 19.7378 9.79628 19.7378 8.85773Z"
            fill="#3E4543"
          />
          <path
            d="M24.2975 7.49839V8.68506C24.2975 9.11657 24.3844 9.22445 24.8078 9.22445C24.9381 9.22445 25.3289 9.21366 25.4049 9.21366L25.2529 10.0012C25.1769 10.0012 24.8186 10.012 24.6775 10.012C23.5375 10.012 23.2878 9.73148 23.2878 8.70663V5.94493L24.2975 5.80469V6.71087H25.4483L25.2963 7.49839H24.2975Z"
            fill="#3E4543"
          />
          <path
            d="M26.5882 8.69535C26.6099 9.12686 26.7293 9.23474 27.2179 9.23474C27.5653 9.23474 27.9561 9.23474 28.4555 9.22395L28.3144 10.0007C27.891 10.0223 27.5653 10.0115 27.131 10.0115C25.9368 10.0115 25.5894 9.52601 25.5894 8.52274V8.17753C25.5894 7.1311 25.9802 6.61328 27.1636 6.61328C28.2275 6.61328 28.6401 7.07716 28.6401 7.86468V7.99413C28.6401 8.54432 28.5098 8.69535 28.0864 8.69535H26.5882ZM26.5882 7.99413H27.6847C27.6847 7.46553 27.587 7.33607 27.131 7.33607C26.6859 7.34686 26.5882 7.47631 26.5882 7.99413Z"
            fill="#3E4543"
          />
          <path
            d="M29.1614 10.0005V7.72421C29.1614 6.95827 29.5956 6.66699 30.3556 6.66699C30.9093 6.66699 31.2459 6.85039 31.3761 7.15245C31.5173 6.86117 31.8647 6.66699 32.3967 6.66699C33.1349 6.66699 33.5909 6.9259 33.5909 7.72421V10.0005H33.2218V7.75657C33.2218 7.18481 32.9829 6.99063 32.3967 6.99063C31.8213 6.99063 31.5716 7.17402 31.5716 7.73499V10.0005H31.2024V7.75657C31.2024 7.18481 30.9527 6.99063 30.3665 6.99063C29.7476 6.99063 29.5414 7.22796 29.5414 7.76736V10.0112H29.1614V10.0005Z"
            fill="#3E4543"
          />
          <path
            d="M37.0651 8.14493V8.6196C37.0651 9.74154 36.6309 10.0975 35.6321 10.0975C34.6332 10.0975 34.199 9.74154 34.199 8.6196V8.14493C34.199 7.02299 34.6332 6.66699 35.6321 6.66699C36.6309 6.66699 37.0651 7.0122 37.0651 8.14493ZM36.696 8.14493C36.696 7.21717 36.4029 6.99063 35.6429 6.99063C34.8721 6.99063 34.5898 7.1956 34.5898 8.14493V8.6196C34.5898 9.54736 34.8721 9.77391 35.6429 9.77391C36.4137 9.77391 36.696 9.56894 36.696 8.6196V8.14493Z"
            fill="#3E4543"
          />
          <path
            d="M40.5499 8.13396V8.64099C40.5499 9.74135 40.1048 10.1081 39.1168 10.1081C38.118 10.1081 37.6946 9.74135 37.6946 8.65177V5.3291H38.0637V7.09832C38.2483 6.78547 38.6391 6.6668 39.1711 6.6668C40.1156 6.6668 40.5499 7.04438 40.5499 8.13396ZM38.0637 7.93977V8.64099C38.0637 9.56875 38.3568 9.7845 39.1385 9.7845C39.8876 9.7845 40.1808 9.56875 40.1808 8.64099V8.15553C40.1808 7.19541 39.8442 7.00123 39.1494 7.00123C38.5523 6.99044 38.0637 7.11989 38.0637 7.93977Z"
            fill="#3E4543"
          />
          <path
            d="M41.3644 6.12835C41.1907 6.12835 41.093 6.05284 41.093 5.84787C41.093 5.66447 41.169 5.56738 41.3644 5.56738C41.5599 5.56738 41.6359 5.66447 41.6359 5.84787C41.6359 6.05284 41.5381 6.12835 41.3644 6.12835ZM41.1799 6.76484H41.549V10.0012H41.1799V6.76484Z"
            fill="#3E4543"
          />
          <path
            d="M42.2979 5.3291H42.667V10.0003H42.2979V5.3291Z"
            fill="#3E4543"
          />
          <path
            d="M43.6549 8.48029C43.6549 9.42963 43.8503 9.69932 44.6863 9.69932C45.0446 9.69932 45.3703 9.68853 45.7611 9.68853L45.696 10.0122C45.4137 10.023 45.0228 10.023 44.6971 10.023C43.5789 10.023 43.2966 9.51593 43.2966 8.54502V8.14586C43.2966 7.08865 43.7092 6.67871 44.6646 6.67871C45.6091 6.67871 45.9999 7.06708 45.9999 7.95168V8.10271C45.9999 8.44793 45.9239 8.49108 45.6634 8.49108H43.6549V8.48029ZM43.6549 8.16744H45.6525V7.95168C45.6525 7.19653 45.3594 6.96998 44.6537 6.96998C43.9372 6.96998 43.6549 7.19653 43.6549 8.16744Z"
            fill="#3E4543"
          />
          <path
            d="M14.9499 13.1941L14.9174 13.3452C14.8305 13.3452 14.6785 13.356 14.5482 13.356C14.0488 13.356 13.886 13.151 13.886 12.6871V12.5253C13.886 12.0291 14.0706 11.8564 14.5482 11.8564C14.646 11.8564 14.7762 11.8564 14.9391 11.8672L14.9065 12.0183C14.7545 12.0075 14.6351 12.0075 14.5374 12.0075C14.1574 12.0075 14.0488 12.1046 14.0488 12.5253V12.6871C14.0488 13.0755 14.1574 13.2049 14.5374 13.2049C14.7111 13.2049 14.8414 13.1941 14.9499 13.1941Z"
            fill="#3E4543"
          />
          <path
            d="M16.5025 12.4921V12.7079C16.5025 13.2257 16.3071 13.3875 15.8402 13.3875C15.3843 13.3875 15.178 13.2257 15.178 12.7079V12.4921C15.178 11.9743 15.3734 11.8125 15.8402 11.8125C16.3071 11.8125 16.5025 11.9635 16.5025 12.4921ZM16.3288 12.4921C16.3288 12.0606 16.1985 11.9635 15.8402 11.9635C15.482 11.9635 15.3517 12.0606 15.3517 12.4921V12.7079C15.3517 13.1394 15.482 13.2365 15.8402 13.2365C16.1985 13.2365 16.3288 13.1394 16.3288 12.7079V12.4921Z"
            fill="#3E4543"
          />
          <path
            d="M16.8608 13.3444V12.298C16.8608 11.9527 17.0671 11.8125 17.4037 11.8125C17.6534 11.8125 17.8162 11.8988 17.8705 12.039C17.9357 11.8988 18.0985 11.8125 18.3373 11.8125C18.6739 11.8125 18.8802 11.9312 18.8802 12.298V13.3444H18.7282V12.3087C18.7282 12.0498 18.6196 11.9527 18.3482 11.9527C18.0876 11.9527 17.9682 12.039 17.9682 12.298V13.3444H17.7945V12.3087C17.7945 12.0498 17.6751 11.9527 17.4145 11.9527C17.1323 11.9527 17.0345 12.0606 17.0345 12.3087V13.3336H16.8608V13.3444Z"
            fill="#3E4543"
          />
          <path
            d="M19.3145 13.3444V12.298C19.3145 11.9527 19.5207 11.8125 19.8573 11.8125C20.107 11.8125 20.2698 11.8988 20.3241 12.039C20.3893 11.8988 20.5521 11.8125 20.791 11.8125C21.1275 11.8125 21.3338 11.9312 21.3338 12.298V13.3444H21.1601V12.3087C21.1601 12.0498 21.0515 11.9527 20.7801 11.9527C20.5195 11.9527 20.4001 12.039 20.4001 12.298V13.3444H20.2481V12.3087C20.2481 12.0498 20.1287 11.9527 19.8681 11.9527C19.5859 11.9527 19.4882 12.0606 19.4882 12.3087V13.3336H19.3145V13.3444Z"
            fill="#3E4543"
          />
          <path
            d="M21.7681 12.8489V11.8564H21.9418V12.8274C21.9418 13.0971 21.9961 13.2373 22.3869 13.2373C22.7777 13.2373 22.832 13.1078 22.832 12.8274V11.8564H23.0057V12.8489C23.0057 13.1941 22.8754 13.3883 22.3869 13.3883C21.8983 13.3883 21.7681 13.2049 21.7681 12.8489Z"
            fill="#3E4543"
          />
          <path
            d="M23.4182 13.3444V12.3519C23.4182 12.0175 23.5376 11.8125 24.037 11.8125C24.5364 11.8125 24.6559 12.0175 24.6559 12.3519V13.3444H24.4822V12.3735C24.4822 12.1038 24.4387 11.9635 24.0262 11.9635C23.6136 11.9635 23.5702 12.1146 23.5702 12.3735V13.3444H23.4182Z"
            fill="#3E4543"
          />
          <path
            d="M25.1659 11.5656C25.0791 11.5656 25.0356 11.5332 25.0356 11.4361C25.0356 11.3498 25.0682 11.3066 25.1659 11.3066C25.2528 11.3066 25.2962 11.3498 25.2962 11.4361C25.2853 11.5332 25.2419 11.5656 25.1659 11.5656ZM25.0791 11.8568H25.2528V13.3456H25.0791V11.8568Z"
            fill="#3E4543"
          />
          <path
            d="M26.6643 13.1941L26.6317 13.3452C26.5449 13.3452 26.3929 13.356 26.2626 13.356C25.7632 13.356 25.6003 13.151 25.6003 12.6871V12.5253C25.6003 12.0291 25.7849 11.8564 26.2626 11.8564C26.3603 11.8564 26.4906 11.8564 26.6534 11.8672L26.6209 12.0183C26.4689 12.0075 26.3495 12.0075 26.2517 12.0075C25.8718 12.0075 25.7632 12.1046 25.7632 12.5253V12.6871C25.7632 13.0755 25.8718 13.2049 26.2517 13.2049C26.4254 13.2049 26.5557 13.1941 26.6643 13.1941Z"
            fill="#3E4543"
          />
          <path
            d="M28.1191 13.1824C28.1191 13.3119 28.0866 13.3442 27.9346 13.3442H27.4569C27.0552 13.3442 26.8923 13.2148 26.8923 12.9019V12.8588C26.8923 12.5352 27.0552 12.3949 27.4569 12.3949C27.7283 12.3949 27.8803 12.4488 27.9563 12.5352V12.3625C27.9563 12.0821 27.8694 11.9958 27.4786 11.9958C27.3375 11.9958 27.1637 11.9958 27.0335 12.0065L27.066 11.8555C27.1746 11.8555 27.3375 11.8447 27.4786 11.8447C27.9454 11.8447 28.1191 11.985 28.1191 12.341V13.1824ZM27.066 12.9019C27.066 13.1069 27.1529 13.204 27.4677 13.204H27.9671V12.8588C27.9671 12.6107 27.8043 12.5459 27.5112 12.5459H27.4786C27.1855 12.5459 27.0878 12.6322 27.0878 12.8696V12.9019H27.066Z"
            fill="#3E4543"
          />
          <path
            d="M28.5425 11.4787L28.7162 11.4463V11.8562H29.335L29.3024 11.9965H28.7162V12.8379C28.7162 13.1292 28.7813 13.1939 29.0745 13.1939H29.3024L29.2699 13.345H29.0745C28.6836 13.345 28.5533 13.2479 28.5533 12.8379V11.4787H28.5425Z"
            fill="#3E4543"
          />
          <path
            d="M29.7043 11.5656C29.6174 11.5656 29.574 11.5332 29.574 11.4361C29.574 11.3498 29.6065 11.3066 29.7043 11.3066C29.802 11.3066 29.8345 11.3498 29.8345 11.4361C29.8345 11.5332 29.7911 11.5656 29.7043 11.5656ZM29.6283 11.8568H29.802V13.3456H29.6283V11.8568Z"
            fill="#3E4543"
          />
          <path
            d="M31.4739 12.4921V12.7079C31.4739 13.2257 31.2785 13.3875 30.8117 13.3875C30.3557 13.3875 30.1494 13.2257 30.1494 12.7079V12.4921C30.1494 11.9743 30.3448 11.8125 30.8117 11.8125C31.2676 11.8125 31.4739 11.9635 31.4739 12.4921ZM31.3002 12.4921C31.3002 12.0606 31.1699 11.9635 30.8117 11.9635C30.4534 11.9635 30.3231 12.0606 30.3231 12.4921V12.7079C30.3231 13.1394 30.4534 13.2365 30.8117 13.2365C31.1699 13.2365 31.3002 13.1394 31.3002 12.7079V12.4921Z"
            fill="#3E4543"
          />
          <path
            d="M31.832 13.3444V12.3519C31.832 12.0175 31.9515 11.8125 32.4509 11.8125C32.9503 11.8125 33.0697 12.0175 33.0697 12.3519V13.3444H32.896V12.3735C32.896 12.1038 32.8526 11.9635 32.44 11.9635C32.0274 11.9635 31.984 12.1146 31.984 12.3735V13.3444H31.832Z"
            fill="#3E4543"
          />
          <path
            d="M34.8829 12.5136C35.2086 12.5459 35.3063 12.697 35.3063 12.9019V12.9235C35.3063 13.1932 35.176 13.3442 34.7526 13.3442C34.5138 13.3442 34.3509 13.3442 34.1338 13.3335L34.1664 13.1824C34.3401 13.1932 34.5138 13.1932 34.7635 13.1932C35.0675 13.1932 35.1435 13.1285 35.1435 12.9127C35.1435 12.7509 35.0783 12.6862 34.8612 12.6646L34.5463 12.6322C34.2532 12.5999 34.1446 12.4812 34.1446 12.2547V12.2223C34.1446 11.9634 34.3075 11.8447 34.6875 11.8447C34.872 11.8447 35.0566 11.8447 35.2846 11.8555L35.252 12.0065C35.0566 11.9958 34.8503 11.9958 34.6766 11.9958C34.4052 11.9958 34.3075 12.0605 34.3075 12.2331C34.3075 12.3733 34.3509 12.4596 34.5789 12.4812L34.8829 12.5136Z"
            fill="#3E4543"
          />
          <path
            d="M35.7514 11.5656C35.6645 11.5656 35.6211 11.5332 35.6211 11.4361C35.6211 11.3498 35.6537 11.3066 35.7514 11.3066C35.8382 11.3066 35.8817 11.3498 35.8817 11.4361C35.8708 11.5332 35.8274 11.5656 35.7514 11.5656ZM35.6645 11.8568H35.8382V13.3456H35.6645V11.8568Z"
            fill="#3E4543"
          />
          <path
            d="M36.2507 13.3444V12.298C36.2507 11.9527 36.457 11.8125 36.7936 11.8125C37.0433 11.8125 37.2061 11.8988 37.2604 12.039C37.3255 11.8988 37.4884 11.8125 37.7272 11.8125C38.0638 11.8125 38.2701 11.9312 38.2701 12.298V13.3444H38.0964V12.3087C38.0964 12.0498 37.9878 11.9527 37.7164 11.9527C37.4558 11.9527 37.3364 12.039 37.3364 12.298V13.3444H37.1844V12.3087C37.1844 12.0498 37.065 11.9527 36.8044 11.9527C36.5221 11.9527 36.4244 12.0606 36.4244 12.3087V13.3336H36.2507V13.3444Z"
            fill="#3E4543"
          />
          <path
            d="M40.018 12.4921V12.7079C40.018 13.2257 39.8117 13.3983 39.3666 13.3983C39.1386 13.3983 38.9649 13.3336 38.8781 13.1934V13.8514H38.7043V12.4921C38.7043 11.9635 38.9323 11.8125 39.3666 11.8125C39.7792 11.8125 40.018 11.942 40.018 12.4921ZM39.8443 12.7079V12.4921C39.8443 12.039 39.6923 11.9635 39.3666 11.9635C39.03 11.9635 38.8781 12.0498 38.8781 12.4921V12.7618C38.8781 13.1394 39.0735 13.2365 39.3666 13.2365C39.7466 13.2365 39.8443 13.107 39.8443 12.7079Z"
            fill="#3E4543"
          />
          <path
            d="M40.3765 11.1982H40.5502V13.345H40.3765V11.1982Z"
            fill="#3E4543"
          />
          <path
            d="M41.0495 11.5656C40.9626 11.5656 40.9192 11.5332 40.9192 11.4361C40.9192 11.3498 40.9518 11.3066 41.0495 11.3066C41.1363 11.3066 41.1797 11.3498 41.1797 11.4361C41.1689 11.5332 41.1255 11.5656 41.0495 11.5656ZM40.9626 11.8568H41.1363V13.3456H40.9626V11.8568Z"
            fill="#3E4543"
          />
          <path
            d="M41.7225 11.8564H42.3088L42.2762 11.9966H41.7225V13.3343H41.5488V11.824C41.5488 11.3386 41.7225 11.1768 42.1677 11.1768C42.2437 11.1768 42.3196 11.1768 42.4391 11.1875L42.4065 11.3386C42.3305 11.3386 42.2328 11.3278 42.1785 11.3278C41.8202 11.3386 41.7225 11.4141 41.7225 11.8564Z"
            fill="#3E4543"
          />
          <path
            d="M42.7104 11.5656C42.6235 11.5656 42.5801 11.5332 42.5801 11.4361C42.5801 11.3498 42.6126 11.3066 42.7104 11.3066C42.7972 11.3066 42.8406 11.3498 42.8406 11.4361C42.8298 11.5332 42.7864 11.5656 42.7104 11.5656ZM42.6235 11.8568H42.7972V13.3456H42.6235V11.8568Z"
            fill="#3E4543"
          />
          <path
            d="M43.3294 12.6432C43.3294 13.0855 43.4162 13.2041 43.807 13.2041C43.9699 13.2041 44.1219 13.2041 44.2956 13.1934L44.263 13.3444C44.1327 13.3444 43.959 13.3552 43.807 13.3552C43.2968 13.3552 43.1665 13.1286 43.1665 12.6755V12.4921C43.1665 12.0067 43.3619 11.8125 43.7962 11.8125C44.2305 11.8125 44.415 11.9959 44.415 12.395V12.4598C44.415 12.6216 44.3825 12.6432 44.263 12.6432H43.3294ZM43.3294 12.5029H44.2413V12.4058C44.2413 12.0606 44.111 11.9527 43.7853 11.9527C43.4488 11.9527 43.3294 12.0498 43.3294 12.5029Z"
            fill="#3E4543"
          />
          <path
            d="M45.3487 13.345C44.8818 13.345 44.6973 13.1724 44.6973 12.6654V12.482C44.6973 11.9965 44.9144 11.8239 45.327 11.8239C45.5767 11.8239 45.7286 11.8887 45.8155 12.0073V11.1982H45.9892V13.1832C45.9892 13.3127 45.9566 13.345 45.8046 13.345H45.3487ZM45.8264 13.194V12.4065C45.8264 12.0181 45.6201 11.9534 45.3378 11.9534C45.0013 11.9534 44.871 12.0613 44.871 12.4712V12.6546C44.871 13.0861 44.9795 13.194 45.3595 13.194H45.8264Z"
            fill="#3E4543"
          />
          <path
            d="M5.483 10.5406C5.70485 10.5406 5.88469 10.357 5.88469 10.1306C5.88469 9.90424 5.70485 9.7207 5.483 9.7207C5.26114 9.7207 5.0813 9.90424 5.0813 10.1306C5.0813 10.357 5.26114 10.5406 5.483 10.5406Z"
            fill="#7C817F"
          />
          <path
            d="M6.64462 10.5406C6.86647 10.5406 7.04631 10.357 7.04631 10.1306C7.04631 9.90424 6.86647 9.7207 6.64462 9.7207C6.42277 9.7207 6.24292 9.90424 6.24292 10.1306C6.24292 10.357 6.42277 10.5406 6.64462 10.5406Z"
            fill="#7C817F"
          />
          <path
            d="M7.81722 10.5406C8.03907 10.5406 8.21892 10.357 8.21892 10.1306C8.21892 9.90424 8.03907 9.7207 7.81722 9.7207C7.59537 9.7207 7.41553 9.90424 7.41553 10.1306C7.41553 10.357 7.59537 10.5406 7.81722 10.5406Z"
            fill="#7C817F"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M8.01269 14.8556C4.22372 17.1966 3.06205 15.3195 3.06205 15.3195C2.11752 14.025 1.97639 11.123 2.01981 9.39695C2.03067 8.78204 2.11752 8.00532 2.11752 8.00532L2.91006 7.09913C2.91006 7.09913 3.86545 6.6784 5.21167 7.20701L5.2551 7.2178L5.29853 7.22859C4.98368 7.17465 4.74484 7.29331 4.61456 7.74641C4.11515 9.64508 4.0283 12.6765 5.80879 13.9387C6.35162 14.327 6.97045 14.6291 7.62185 14.7693C7.63271 14.7801 7.73042 14.8125 8.01269 14.8556Z"
            fill="url(#paint0_linear_5595_38122)"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M2.11743 8.00525C2.11743 8.00525 2.24771 4.10003 4.47333 3.97058C4.47333 3.97058 6.10183 3.66852 10.2599 6.85095C10.2599 6.85095 10.7376 7.70319 10.2274 8.87907C10.2274 8.87907 10.0862 9.62344 9.03313 10.6699C9.27198 10.2707 9.27198 9.90392 8.89199 9.52635C8.89199 9.52635 7.41549 7.92974 5.52643 7.29325C5.50471 7.28246 5.46129 7.27168 5.407 7.2501C5.07045 7.14222 4.73389 7.07749 4.37562 7.04513C4.37562 7.05592 3.07282 6.88331 2.11743 8.00525Z"
            fill="#D0009E"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M2.11743 8.00525C2.11743 8.00525 2.24771 4.10003 4.47333 3.97058C4.47333 3.97058 6.10183 3.66852 10.2599 6.85095C10.2599 6.85095 10.7376 7.70319 10.2274 8.87907C10.2274 8.87907 10.0862 9.62344 9.03313 10.6699C9.27198 10.2707 9.27198 9.90392 8.89199 9.52635C8.89199 9.52635 7.41549 7.92974 5.52643 7.29325C5.50471 7.28246 5.46129 7.27168 5.407 7.2501C5.07045 7.14222 4.73389 7.07749 4.37562 7.04513C4.37562 7.05592 3.07282 6.88331 2.11743 8.00525Z"
            fill="url(#paint1_linear_5595_38122)"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M6.10172 13.4861C7.58908 12.4181 11.1826 9.04151 10.249 6.85156C10.249 6.85156 12.6917 8.67472 12.7677 10.0664C12.7677 10.0664 13.0391 11.7493 8.0125 14.8454C8.0125 14.8454 5.38518 14.8022 4.58179 12.1268C4.58179 12.1268 4.61436 12.2779 4.72292 12.4181C4.78806 12.526 4.88577 12.5907 4.98348 12.6339C5.04862 12.6662 5.11376 12.6878 5.20062 12.6986C5.47203 12.7418 5.73259 12.6339 5.97144 12.5368C6.06915 12.5044 6.16686 12.4505 6.26457 12.4505C6.5577 12.4505 6.36228 12.9144 6.308 13.0438C6.308 13.0654 6.19943 13.3135 6.10172 13.4861Z"
            fill="#E2231A"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M6.10172 13.4861C7.58908 12.4181 11.1826 9.04151 10.249 6.85156C10.249 6.85156 12.6917 8.67472 12.7677 10.0664C12.7677 10.0664 13.0391 11.7493 8.0125 14.8454C8.0125 14.8454 5.38518 14.8022 4.58179 12.1268C4.58179 12.1268 4.61436 12.2779 4.72292 12.4181C4.78806 12.526 4.88577 12.5907 4.98348 12.6339C5.04862 12.6662 5.11376 12.6878 5.20062 12.6986C5.47203 12.7418 5.73259 12.6339 5.97144 12.5368C6.06915 12.5044 6.16686 12.4505 6.26457 12.4505C6.5577 12.4505 6.36228 12.9144 6.308 13.0438C6.308 13.0654 6.19943 13.3135 6.10172 13.4861Z"
            fill="url(#paint2_linear_5595_38122)"
          />
          <defs>
            <linearGradient
              id="paint0_linear_5595_38122"
              x1="4.63377"
              y1="12.5815"
              x2="2.94439"
              y2="7.34901"
              gradientUnits="userSpaceOnUse"
            >
              <stop offset="0.7178" stop-color="#3E4543" stop-opacity="0" />
              <stop
                offset="0.8068"
                stop-color="#424946"
                stop-opacity="0.3153"
              />
              <stop
                offset="0.8874"
                stop-color="#4D5351"
                stop-opacity="0.6008"
              />
              <stop
                offset="0.9644"
                stop-color="#5F6562"
                stop-opacity="0.8739"
              />
              <stop offset="1" stop-color="#6A706D" />
            </linearGradient>
            <linearGradient
              id="paint1_linear_5595_38122"
              x1="2.43117"
              y1="6.11247"
              x2="10.4192"
              y2="8.2665"
              gradientUnits="userSpaceOnUse"
            >
              <stop offset="0.7377" stop-color="#3E4543" stop-opacity="0" />
              <stop
                offset="0.8288"
                stop-color="#414845"
                stop-opacity="0.3546"
              />
              <stop
                offset="0.8954"
                stop-color="#4A514F"
                stop-opacity="0.6138"
              />
              <stop offset="0.954" stop-color="#5A605E" stop-opacity="0.8419" />
              <stop offset="0.9946" stop-color="#6A706D" />
            </linearGradient>
            <linearGradient
              id="paint2_linear_5595_38122"
              x1="10.1854"
              y1="9.22803"
              x2="6.46123"
              y2="14.5807"
              gradientUnits="userSpaceOnUse"
            >
              <stop offset="0.7188" stop-color="#3E4543" stop-opacity="0" />
              <stop
                offset="0.8154"
                stop-color="#414846"
                stop-opacity="0.3433"
              />
              <stop offset="0.89" stop-color="#4B514F" stop-opacity="0.6088" />
              <stop
                offset="0.9571"
                stop-color="#5B615F"
                stop-opacity="0.8474"
              />
              <stop offset="1" stop-color="#6A706D" />
            </linearGradient>
          </defs>
        </svg>
      );
    }
  };

  return (
    <div className="max-w-full p-1 md:p-0 sm:p-0 lg:p-0 xl:p-0 sm:max-h-full md:max-h-full lg:max-h-full xl:max-h-full max-h-[70vh] overflow-y-auto sm:overflow-visible md:overflow-visible lg:overflow-visible xl:overflow-visible">
      <div className="mt-0 sm:mt-5 md:mt-4">
        <div className="p-4 md:px-1 sm:px-1 lg:px-1 xl:px-1 flex justify-between items-center ">
          <h2 className="text-[14px] font-semibold font-inter font-[600] font-[14px] text-headding-color">Email</h2>
          <div className="flex space-x-4">
            <button className="px-4 py-2 text-[12px] font-inter font-[600] text-cardValue">
            Discard
            </button>
            <button className="px-4 py-2 text-[12px] font-inter font-[600] text-whiteColor bg-bgButton border-[1px] border-reloadBorder rounded-custom">
              Save
            </button>
          </div>
        </div>

        <div className="p-6 bg-backgroundWhite rounded-custom12px mt-2">
          <h3 className="text-[14px] font-inter font-[500] text-paragraphBlack  mb-4">
            Available Email Marketing
          </h3>

          <CustomCards
            items={CardItems}
            onToggle={handleToggleConnection}
            onEdit={handleEditClick}
            renderLogo={renderLogo}
            title="Active"
            dynamicFields={dynamicFields}
            dynamicFieldsValues={dynamicFieldsValues}
            onDynamicFieldChange={handleDynamicFieldChange}
            showDynamicFieldsAtTop={true}
          />
        </div>

      </div>

      {/* Modal for editing POS */}
      {isModalOpen && currentItem && (
        <CustomModal
          isOpen={isModalOpen}
          onClose={() => setIsModalOpen(false)}
          mode={modalMode}
          fields={emailFields}
          item={currentItem}
          onSave={handleSave}
          title={`${modalMode === "edit" ? "Configuring" : "Add"} ${currentItem.name}`}
          additionalButton={{
            label: "Learn More",
            onClick: () => {
              console.log("New button clicked!");
            },
            className: "bg-transperant", 
            disabled: false, 
          }}
        />
      )}
    </div>
  );
};

export default Email;
